<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="java86.DAO">
   
  
  
  <insert id="insertFine" parameterType="fvo">
  	insert into java86_fine (fine_no,mem_id,fine_amount,fine_detail)
  	values (s86_java86_fine.nextVal,#{memId},#{fineAmount},#{fineDetail})
   
  </insert>
  
  
  <delete id="deleteFine" parameterType="int">
  		delete from java86_fine
  		where fine_no=#{findNo}
  
  </delete>
  
  <update id="updateFine" parameterType="fvo">
  	update java86_fine
  	set mem_id=#{memId}, fine_amount=#{fineAmount},fine_detail=#{fineDetail}
  	where fine_no=#{fineNo}
  
  </update>
  
  <delete id="deleteAllFine">
  	delete from java86_fine
  </delete>
  
  <resultMap type="fvo" id="fineMap">
  	<result column="fine_No" property="fineNo" />
  	<result column="mem_Id" property="memId" />
  	<result column="mem_name" property="memName" />
  	<result column="fine_Amount" property="fineAmount" />
  	<result column="fine_Detail" property="fineDetail" />
  	<result column="fine_Date" property="fineDate" />
  
  
  
  </resultMap>
    
  <select id="selectFine" resultType="fineMap">
  	select	fine_no,mem_id,m.mem_name,fine_amount,fine_detail,fine_date
  	from java86_fine, java86_member as m
  	where mem_id=m.mem_id
  
  </select>
  
  <select id="selectNameId" parameterType="string" resultType="fineMap">
  			select fine_no,mem_id,m.mem_name,fine_amount,fine_detail,fine_date
  			from java86_fine, java86_member as m
  			where mem_name=#{memName} 
  </select>
  
  
    <insert id = "insertBoard" parameterType="board" >
    	<selectKey keyProperty="no" order="BEFORE" resultType="int">
    		select s86_board_no.nextVal from dual
    	</selectKey>
    	insert into t86_board (
    		no, title, writer, content
    	) values(
    		#{no} , #{title}, #{writer}, #{content}
    	)
    
    </insert>
    
    <update id = "updateBoard" parameterType="board"  >
    
    	update t86_board 
    	set title = #{title}, content=#{content}, writer=#{writer}
    	where no = #{no}
    
    </update>
    
    <delete id = "deleteBoard" parameterType="int">
    	delete from t86_board
    		where no = #{no}
    </delete>
    
    <resultMap type="board" id="boardMap">
    	<result column = "no" property="no"/>
    	<result column = "title" property="title"/>
    	<result column = "writer" property="writer"/>
    	<result column = "content" property="content"/>
    	<result column = "reg_date" property="regDate"/>
    </resultMap>
    <select id = "selectAllBoard"   resultMap="boardMap">
        select no, title, writer, content, reg_date 
        from t86_board 
        order by no desc
    </select>
    
    <select id = "selectBoardNo" parameterType="int" resultMap= "boardMap">
    	select no, title, writer, content, reg_date as regDate 
        from t86_board 
        where no = #{no}
     
    </select>
    
    <select id = "loginCheck" parameterType = "user" resultType ="string">
    	select id
    	from t86_login
    	where id = #{id} and password = #{password}
    </select>
    
    <insert id="insertFile" parameterType="fvo">
    	insert into t86_board_file(file_no,no,ori_file_name,real_file_name,file_path,file_size)
    	values (s86_board_file.nextval,#{no},#{oriFileName},#{realFileName},#{filePath},#{fileSize})
    
    </insert>
    
    
    
     <resultMap type="fvo" id="FileVOMap">
    	<result column = "file_no" property="fileNo"/>
    	<result column = "no" property="no"/>
    	<result column = "ori_file_name" property="oriFileName"/>
    	<result column = "real_file_name" property="realFileName"/>
    	<result column = "file_path" property="filePath"/>
    	<result column = "file_size" property="fileSize"/>
    </resultMap>
    
    
     <select id = "selectFileNO" parameterType="int" resultMap= "FileVOMap">
    	select file_no, no,  ori_file_name, real_file_name,file_path,file_size
    	        from t86_board_file
        where no = #{no}
     
    </select>
    
    
    
    
    
    <resultMap type="comment" id="commentMap">
    	<result column = "comment_no" property="commentNO"/>
    	<result column = "no" property="no"/>
    	<result column = "id" property="id"/>
    	<result column = "cmt" property="cmt"/>
    	<result column = "rdeg_Date" property="regDate"/>
    </resultMap>
    <select id = "selectComment" parameterType="int"  resultMap="commentMap">
        select comment_no, no, id, cmt, reg_Date 
        from t86_board_comment
        where no = #{no}
        order by comment_no desc
    </select>
    
    
     <insert id="insertComment" parameterType="comment">
    	insert into t86_board_comment(comment_no,no,id,cmt)
    	values (s86_board_comment.nextval,#{no},#{id},#{cmt})
    
    </insert>
    
    <delete id = "deleteComment" parameterType="int">
    	delete from t86_board_comment
    		where comment_no = #{commentNO}
    </delete>
    
    <update id = "updateComment" parameterType="comment"  >
    
    	update t86_board_comment 
    	set cmt = #{cmt}
    	where comment_no = #{commentNO}
    
    </update>
    
    
    
</mapper>